<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ALOCI - Search</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="navbar">
  <div class="logo">
    <img src="aloci-logo.svg" alt="Aloci" class="logo-img">
  </div>

  <nav>
    <a href="index.html">Home</a>
    <a href="soundOfHealing.html">Music</a>
    <a href="ALOCI.postcast.html">Podcasts</a>
    <a href="search.html" class="active">Search</a>
    <a href="favorites.html">Saved</a>
    <a href="profile.html">Profile</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a href="terms.html">Terms</a>

    <a id="signinLink" href="signin.html" class="signin-btn">Sign In</a>
    <a id="logoutLink" class="signin-btn" style="display:none;">Log Out</a>
  </nav>
</header>

<section class="search-section">
  <h1>Search Posts</h1>

  <input type="text" id="searchBar" placeholder="#tag or keyword...">
  <button class="btn-gradient" onclick="doSearch()">Search</button>

  <h2>Results</h2>
  <div id="postFeed"></div>
</section>

<script src="script.js"></script>

<script>
function doSearch() {
  const query = document.getElementById("searchBar").value.trim().toLowerCase();
  const feed = document.getElementById("postFeed");
  feed.innerHTML = "";

  const posts = JSON.parse(localStorage.getItem("postsDB")) || [];
  const results = posts.filter(p =>
    p.text.toLowerCase().includes(query) ||
    p.text.toLowerCase().includes("#" + query)
  );

  results.reverse().forEach(p => renderPost(p));
}

/* Load searches from URL*/
document.addEventListener("DOMContentLoaded", () => {
  const tag = new URLSearchParams(window.location.search).get("tag");
  if (tag) {
    document.getElementById("searchBar").value = "#" + tag;
    doSearch();
  }
});
</script>

</body>
</html>
